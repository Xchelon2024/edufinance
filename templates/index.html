
{% extends 'base.html' %}
{% load humanize %}






{% block summary %}

           
                <!-- [ Layout content ] Start -->
                <div class="layout-content">

                    <!-- [ content ] Start -->
                    <div class="container-fluid flex-grow-1 container-p-y">
                        <h4 class="font-weight-bold py-3 mb-0">Students</h4>
                        <div class="text-muted small mt-0 mb-3 d-block breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href=""><i class="feather icon-home"></i></a></li>
                                <li class="breadcrumb-item"><a href="{% url 'invoice-list' %}">Student List</a></li>
                                <li class="breadcrumb-item active"></li>
                            </ol>
                        </div>

                        <div class="row">
                            <!-- 2nd row Start -->
                            <div class="col-md-12">
                                <div class="card d-flex w-100 mb-4">
                                    <div class="row no-gutters row-bordered row-border-light h-100">
                                        <div class="d-flex col-md-6 col-lg-3 align-items-center">
                                            <div class="card-body">
                                                <div class="row align-items-center mb-3">
                                                    <div class="col-auto">
                                                        <i class="lnr lnr-earth text-primary display-4"></i>
                                                    </div>
                                                    <div class="col">
                                                        <h6 class="mb-0 text-muted">Total <span class="text-primary">Students</span></h6>
                                                        <h4 class="mt-3 mb-0">{{ total_students }}<i class="ion ion-md-arrow-round-down ml-3 text-danger"></i></h4>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                        <div class="d-flex col-md-6 col-lg-3 align-items-center">
                                            <div class="card-body">
                                                <div class="row align-items-center mb-3">
                                                    <div class="col-auto">
                                                        <i class="lnr lnr-cart text-primary display-4"></i>
                                                    </div>
                                                    <div class="col">
                                                        <h6 class="mb-0 text-muted"><span class="text-primary">Total</span> Payments</h6>
                                                        <h4 class="mt-3 mb-0">{{ total_payments }}<i class="ion ion-md-arrow-round-up ml-3 text-success"></i></h4>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                        <div class="d-flex col-md-6 col-lg-3 align-items-center">
                                            <div class="card-body">
                                                <div class="row align-items-center mb-3">
                                                    <div class="col-auto">
                                                        <i class="lnr lnr-users text-primary display-4"></i>
                                                    </div>
                                                    <div class="col">
                                                        <h6 class="mb-0 text-muted">Total <span class="text-primary">Balance</span></h6>
                                                        <h4 class="mt-3 mb-0">{{ total_balance }}<i class="ion ion-md-arrow-round-down ml-3 text-danger"></i></h4>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                        <div class="d-flex col-md-6 col-lg-3 align-items-center">
                                            <div class="card-body">
                                                <div class="row align-items-center mb-3">
                                                    <div class="col-auto">
                                                        <i class="lnr lnr-magic-wand text-primary display-4"></i>
                                                    </div>
                                                    <div class="col">
                                                        <h6 class="mb-0 text-muted">Total <span class="text-primary">Expected</span></h6>
                                                        <h4 class="mt-3 mb-0">{{ total_expected_payments }}<i class="ion ion-md-arrow-round-up ml-3 text-success"></i></h4>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Staustic card 3 Start -->
                            </div>
                            <!-- 2nd row Start -->
                        </div>
                        <div class="row">
                            <!-- 3rd row Start -->
                            
                            <div class="col-xl-12">
                                <div class="card mb-4">
                                    <div class="card-header with-elements pb-0">
                                        <h6 class="card-header-title mb-0">Students details</h6>
                                        <div class="card-header-elements ml-auto p-0 mb-4">
                                            <a class="btn btn-primary" href="{% url 'student-create' %}"><i
                                                 class="fas fa-plus"></i> New Student</a>
                                            <a class="btn btn-primary" href="{% url 'student-upload' %}"><i
                                                  class="fas fa-upload"></i> Upload Students </a>
                                        </div>
                                    </div>
                                    <div class="card-body">
                               <div class="table-responsive">
                                  <table id="studenttable" class="table table-bordered table-hover" data-page-length='100'>
                                    <thead class="thead-light">
                                      <tr>
                                        <th>S/N</th>
                                        <th>Fullname</th>
                                        <th>Registration Number</th>
                                        <th>Current Class</th>
                                        <th>Gender</th>
                                        <th>Mobile Phone Number</th>
                                        <th>Status</th>
                                      </tr>
                                    </thead>
                                    <tbody>

                                      {% for student in students %}
                                        <tr class='clickable-row' data-href="{% url 'student-detail' student.id %}">
                                          <td>{{ forloop.counter }}</td>
                                          <td>{{ student.surname }} {{student.firstname }} {{student.other_name }}</td>
                                          <td>{{ student.registration_number }}</td>
                                          <td>{{ student.current_class }}</td>
                                          <td>{{ student.get_gender_display }}</td>
                                          <td>{{ student.parent_mobile_number }}</td>
                                          <td>{{ student.get_current_status_display }}</td>
                                        </tr>
                                      {% endfor %}

                                    </tbody>
                                  </table>
                                </div>

                                </div>
                              </div>
                            </div>
                            <!-- 3rd row Start -->
                        </div>
                    </div>
                    <!-- [ content ] End -->

                    <!-- [ Layout footer ] End -->
                </div>
                <!-- [ Layout content ] Start -->
{% endblock summary %}



{% block morejs %}
<script>
  $('#studenttable').DataTable({
  });
</script>

{% endblock morejs %}

